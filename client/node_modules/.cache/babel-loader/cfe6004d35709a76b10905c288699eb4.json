{"remainingRequest":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/thread-loader/dist/cjs.js!/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/babel-loader/lib/index.js!/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/src/components/TreeChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/src/components/TreeChart.vue","mtime":1610142022247},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgcm91bmQsIHN1bSB9IGZyb20gJ21hdGhqcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidnVlLXRyZWUtY2hhcnQiLAogIHByb3BzOiBbJ2RhdGEnLCAnYmFja2dyb3VuZCcsICdoaWdobGlnaHQnLCAnc2hvcnRfY2F0ZWdvcnknXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcm9vdDoge30sCiAgICAgIGNoYXJ0RGVmYXVsdHM6IHsKICAgICAgICB3aWR0aDogODAwLAogICAgICAgIGhlaWdodDogNTUwLAogICAgICAgIGNoYXJ0SWQ6ICJsaW5lY2hhcnQtdnVlIiwKICAgICAgICBtYXJnaW46IHsKICAgICAgICAgIHRvcDogMCwKICAgICAgICAgIHJpZ2h0OiAwLAogICAgICAgICAgYm90dG9tOiAwLAogICAgICAgICAgbGVmdDogMAogICAgICAgIH0sCiAgICAgICAgZ3JpZE9wYWNpdHk6IDEsCiAgICAgICAgZGF0YTogW10sCiAgICAgICAgcGFkZGluZzogewogICAgICAgICAgaW5uZXI6IDAsCiAgICAgICAgICBvdXRlcjogMiwKICAgICAgICAgIHRvcDogMjAsCiAgICAgICAgICBib3R0b206IDAKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmU6ICIiLAogICAgICAvL1RyYW5zbGF0ZSBjby1vcmRzIGZvciBjaGFydCwgeCBheGlzIGFuZCB5YXhpcy4gVGhpcyBpcyBpbmplY3RlZCBpbnRvIHRlbXBsYXRlCiAgICAgIHRybnNZOiAidHJhbnNsYXRlKDAsMCkiLAogICAgICB0cm5zWDogdGhpcy5nZXRUcm5zeAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnRyYW5zbGF0ZSA9ICJ0cmFuc2xhdGUoIiArIHRoaXMuY2hhcnREZWZhdWx0cy5tYXJnaW4ubGVmdCArICIsIiArIHRoaXMuY2hhcnREZWZhdWx0cy5tYXJnaW4udG9wICsgIikiOwogICAgdGhpcy5jYWxjdWxhdGVUcmVlKCk7CiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGN1bGF0ZVRyZWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZVRyZWUoKSB7CiAgICAgIHRoaXMucm9vdCA9IGQzLmhpZXJhcmNoeSh0aGlzLmRhdGEpLnN1bShmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnBvcnRfd2VpZ2h0OwogICAgICB9KTsKICAgICAgZDMudHJlZW1hcCgpLnRpbGUoZDMudHJlZW1hcEJpbmFyeSkuc2l6ZShbdGhpcy5jaGFydERlZmF1bHRzLndpZHRoLCB0aGlzLmNoYXJ0RGVmYXVsdHMuaGVpZ2h0XSkucGFkZGluZ0lubmVyKHRoaXMuY2hhcnREZWZhdWx0cy5wYWRkaW5nLmlubmVyKS5wYWRkaW5nT3V0ZXIodGhpcy5jaGFydERlZmF1bHRzLnBhZGRpbmcub3V0ZXIpLnBhZGRpbmdUb3AodGhpcy5jaGFydERlZmF1bHRzLnBhZGRpbmcudG9wKS5wYWRkaW5nQm90dG9tKHRoaXMuY2hhcnREZWZhdWx0cy5wYWRkaW5nLmJvdHRvbSkodGhpcy5yb290KTsKICAgIH0sCiAgICBnZXRTaG9ydGVuZGVkQ2F0ZWdvcnk6IGZ1bmN0aW9uIGdldFNob3J0ZW5kZWRDYXRlZ29yeShjYXQpIHsKICAgICAgaWYgKHRoaXMuc2hvcnRfY2F0ZWdvcnkpIHsKICAgICAgICByZXR1cm4gdGhpcy5zaG9ydF9jYXRlZ29yeVtjYXRdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBjYXQ7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBdHRyaWJ1dGlvbkNvbG9yOiBmdW5jdGlvbiBnZXRBdHRyaWJ1dGlvbkNvbG9yKHJfdW5zY2FsZWQpIHsKICAgICAgaWYgKHJfdW5zY2FsZWQgPj0gMCkgewogICAgICAgIHJldHVybiAnIzg2QUQzQic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcjQUQzQjNCJzsKICAgICAgfQogICAgfSwKICAgIHJvdW5kRGF0YTogZnVuY3Rpb24gcm91bmREYXRhKGQsIGRpZ2l0cykgewogICAgICByZXR1cm4gcm91bmQoZCwgZGlnaXRzKTsKICAgIH0sCiAgICBnZXRGaWxsU3R5bGU6IGZ1bmN0aW9uIGdldEZpbGxTdHlsZShzX25hbWUsIHJfbmFtZSkgewogICAgICByZXR1cm4gcl9uYW1lID09ICdFVScgPyB7CiAgICAgICAgZmlsbDogJ3VybCgjJyArIHNfbmFtZS5yZXBsYWNlKCcgJywgJy0nKSArICctaCknCiAgICAgIH0gOiB7CiAgICAgICAgZmlsbDogJ3VybCgjJyArIHNfbmFtZS5yZXBsYWNlKCcgJywgJy0nKSArICcpJwogICAgICB9OwogICAgfQogIH0KfTs="},{"version":3,"sources":["TreeChart.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- \nGood example here bar chart ---[ https://stackoverflow.com/questions/48726636/draw-d3-axis-without-direct-dom-manipulation \n-->\n\n<template>\n    <div v-if=\"!loading\">\n        <!-- <h1><span v-bind:style={color:highlight[category]}>{{getShortendedCategory(category)}}</span>{{title}} <span class='float-right' v-if=\"show_pct\" :style=\"{color: getAttributionColor(getPctChange())}\">[{{getPctChange()}} %]</span></h1> -->\n        <svg :width=\"chartDefaults.width + chartDefaults.margin.left + chartDefaults.margin.right\" :height=\"chartDefaults.height + chartDefaults.margin.top + chartDefaults.margin.bottom\">\n        <g v-for=\"s_child in root.children\" :key=\"s_child.data.name\">\n            <defs>\n            <linearGradient :id=\"s_child.data.name.replace(' ','-')\" gradientTransform=\"rotate(90)\">\n            <stop offset=\"0%\" :stop-color=\"background[s_child.data.name]+'60'\"/>\n            <stop offset=\"100%\" :stop-color=\"background[s_child.data.name]\"/>\n            </linearGradient>\n            <linearGradient :id=\"s_child.data.name.replace(' ','-')+'-h'\" gradientTransform=\"rotate(90)\">\n            <stop offset=\"0%\" :stop-color=\"highlight[s_child.data.name]+'60'\"/>\n            <stop offset=\"100%\" :stop-color=\"highlight[s_child.data.name]\"/>\n            </linearGradient>\n            </defs>\n            <!--   -->\n\n            <rect v-if=\"s_child.data.port_sector_weight > 0\"\n                :x=\"s_child.x0\" \n                :y=\"s_child.y0\" \n                :width=\"s_child.x1 - s_child.x0\" \n                :height=\"s_child.y1 - s_child.y0\"\n                :fill=\"background[s_child.data.name]+'30'\"\n                >\n            </rect>\n            \n            <g v-for=\"r_child in s_child.children\" :key=\"r_child.data.name + s_child.data.name\">\n                \n\n                <g v-if=\"r_child.data.port_weight > 0\">\n                    <rect\n                    :x=\"r_child.x0\" \n                    :y=\"r_child.y0\" \n                    :width=\"r_child.x1 - r_child.x0\" \n                    :height=\"r_child.y1 - r_child.y0\"\n                    :style=\"getFillStyle(s_child.data.name,r_child.data.name)\" \n                    >\n                    </rect>\n\n                    <g v-for=\"e_child in r_child.children\" :key=\"e_child.data.name\">\n                        <rect\n                        :x=\"e_child.x0\" \n                        :y=\"e_child.y0\" \n                        :width=\"(e_child.x1 - e_child.x0)\" \n                        :height=\"e_child.y1 - e_child.y0\"\n                        stroke='#ffffff30'\n                        fill=none\n                        >\n                        </rect>\n\n                        <text \n                        :x=\"e_child.x0 + 5\" \n                        :y=\"e_child.y0 + 10\" \n                        font-size=\"10\"\n                        text-anchor='left'\n                        dominant-baseline='middle'\n                        fill='#ffffff30' \n                        >\n                        {{e_child.data.name}}\n                        </text>\n\n                        <text \n                        :x=\"e_child.x1 - 5\" \n                        :y=\"e_child.y1 - 10\" \n                        font-size=\"10\"\n                        text-anchor='end'\n                        dominant-baseline='middle'\n                        fill='#ffffff30' \n                        >\n                        {{roundData(e_child.data.port_weight * 100,2)}} % \n                        </text>\n                    </g>\n\n                    <text \n                        text-anchor='left' \n                        dominant-baseline='middle' \n                        :x=\"r_child.x0 + 5\" \n                        :y=\"r_child.y0 + 10\" \n                        fill='#ffffff80'  \n                        font-size=\"10\">\n                        {{r_child.data.name}} ({{roundData(r_child.data.port_weight * 100,2)}} %)\n                    </text>\n                </g>\n                \n            </g>\n            <text v-if=\"s_child.data.port_sector_weight > 0\"\n                :x=\"s_child.x0 + chartDefaults.padding.outer + 5\" \n                :y=\"s_child.y0 + chartDefaults.padding.top/2\" \n                :fill='highlight[s_child.data.name]' \n                font-size=\"10\"\n                dominant-baseline='middle'\n            >\n                {{getShortendedCategory(s_child.data.name)}} ({{roundData(s_child.data.port_sector_weight * 100,2)}} %)\n            </text>\n\n            <text v-if=\"s_child.data.port_sector_weight > 0\"\n                text-anchor='end' \n                dominant-baseline='middle' \n                :x=\"s_child.x1 - 5\" \n                :y=\"s_child.y0 + 10\" \n                :fill='getAttributionColor(s_child.data.benchmark_deviation)'  \n                font-size=\"10\">\n                [{{roundData((s_child.data.benchmark_deviation) * 100,2)}} %]\n            </text>\n        </g>\n        </svg>\n    </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport axios from 'axios';\nimport {round, sum} from 'mathjs';\n\nexport default {\n    name: \"vue-tree-chart\",\n    props: ['data','background','highlight','short_category'],\n    data() {\n        return {\n            loading: true,\n            root: {},\n            chartDefaults: {\n                width: 800,\n                height: 550,\n                chartId: \"linechart-vue\",\n                margin: {\n                    top: 0,\n                    right: 0,\n                    bottom: 0,\n                    left: 0\n                },\n                gridOpacity: 1,\n                data: [],\n                padding: {\n                    inner: 0,\n                    outer: 2,\n                    top:20,\n                    bottom:0\n                }\n            },\n            line: \"\",\n            //Translate co-ords for chart, x axis and yaxis. This is injected into template\n            trnsY: \"translate(0,0)\",\n            trnsX: this.getTrnsx,\n        };\n    }, \n    created() {\n        this.translate = \"translate(\" + this.chartDefaults.margin.left + \",\" + this.chartDefaults.margin.top + \")\";\n        this.calculateTree();\n        this.loading = false\n    },\n    methods: {\n        calculateTree: function() {\n            this.root = d3.hierarchy(this.data).sum(function(d){ return d.port_weight}) \n            d3.treemap().tile(d3.treemapBinary).size([this.chartDefaults.width,this.chartDefaults.height]).paddingInner(this.chartDefaults.padding.inner)\n            .paddingOuter(this.chartDefaults.padding.outer).paddingTop(this.chartDefaults.padding.top).paddingBottom(this.chartDefaults.padding.bottom)(this.root);\n        },\n        getShortendedCategory: function(cat) { \n            if(this.short_category) {\n                return this.short_category[cat]\n            } else {\n                return cat\n            }\n            \n        },\n        getAttributionColor: function(r_unscaled) {\n            if(r_unscaled >= 0) {\n                return '#86AD3B'\n            } else {\n                return '#AD3B3B'\n            }\n        },\n        roundData(d, digits) {\n            return round(d, digits)\n        },\n        getFillStyle(s_name, r_name) {\n            return r_name == 'EU'? {fill:'url(#'+s_name.replace(' ','-')+'-h)'}: {fill:'url(#'+s_name.replace(' ','-') + ')'}\n        },\n    }\n};\n</script>\n<!-- css loaderhttps://vue-loader.vuejs.org/guide/scoped-css.html#mixing-local-and-global-styles -->\n<style>\nh1 {\n    color: white;\n    font-family: Roboto;\n    font-size: 10px;\n    text-align: left;\n    padding-left: 10px;\n    padding-bottom: 5px;\n    padding-top: 5px;\n    margin-top:0px;\n    background: #b23d3d30;\n}\n\nh1 span {\n    margin-right: 10px;\n}\n\npath.line {\n  fill: none;\n  stroke: white;\n  stroke-width: 1px;\n}\n\n.grid line {\n  opacity: 0.05;\n  color:white;\n}\n.xA line {\n  opacity: 0.5;\n}\n\n.xA {\n    color:white;\n}\n\n.yA {\n    color:white;\n}\n\n/*Some fancy animation to draw chart*/\n/* svg .lineChart > path {\n  stroke: #ecbc3a;\n  stroke-width: 3;\n  stroke-dasharray: 4813.713;\n  stroke-dashoffset: 4813.713;\n}\n\n.ani2 svg .lineChart > path {\n  stroke: #ecbc3a;\n}\n.ani1 svg .lineChart > path {\n  stroke: #ecbc3a;\n} */\n\n#Layer_1 {\n  width: 100%;\n}\n\n.text {\n  display: inline-block;\n  font-size: 3vw;\n  margin: 0.5vw 0 1.5vw;\n}\n\nsvg {\n  border-bottom: 1px solid rgba(256,256,256,0.1);\n  margin-bottom: 0;\n}\n\n.float-right {\n    float: right;\n}\n</style>\n"],"sourceRoot":"src/components"}]}