{"remainingRequest":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/src/components/CorrelationPlot.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/src/components/CorrelationPlot.vue","mtime":1610388608358},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hugo/Dropbox/hugo_documents_folder/SMF_RISK/dashboard/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHtyb3VuZCwgc3VtfSBmcm9tICdtYXRoanMnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogInZ1ZS1jb3JyZWxhdGlvbi1wbG90IiwKICAgIHByb3BzOiBbJ2RhdGEnLCdzaG9ydF9jYXRlZ29yeSddLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtYXhfcmFkaXVzOiAwLAogICAgICAgICAgICBjb2xfY2F0czogW10sCiAgICAgICAgICAgIHJvd19jYXRzOiBbXSwKICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICB9OwogICAgfSwgCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMubWF4X3JhZGl1cyA9IDEKICAgICAgICB0aGlzLmNvbF9jYXRzID0gT2JqZWN0LmtleXModGhpcy5kYXRhKQogICAgICAgIHRoaXMucm93X2NhdHMgPSBPYmplY3Qua2V5cyh0aGlzLmRhdGFbdGhpcy5jb2xfY2F0c1swXV0pCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0U2hvcnRlbmRlZENhdGVnb3J5OiBmdW5jdGlvbihjYXQpIHsgCiAgICAgICAgICAgIGxldCBzcGxpdF9jYXQgPSBjYXQuc3BsaXQoJ18nKS5zbGljZSgwLGNhdC5zcGxpdCgnXycpLmxlbmd0aCAtIDEpLmpvaW4oJ18nKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYodGhpcy5zaG9ydF9jYXRlZ29yeSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvcnRfY2F0ZWdvcnlbc3BsaXRfY2F0XQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHNwbGl0X2NhdAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgcm91bmREYXRhKGQsIGRpZ2l0cykgewogICAgICAgICAgICByZXR1cm4gcm91bmQoZCwgZGlnaXRzKQogICAgICAgIH0sCiAgICAgICAgZ2V0UGN0QXR0cmlidXRpb25SYWRpdXM6IGZ1bmN0aW9uKHJfdW5zY2FsZWQsIGNpcmNsZSkgewogICAgICAgICAgICAvLyBHZXRzIHRoZSBtYXhpbXVtIHZhbHVlIGZvciB0aGUgcmVnaW9uCiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSBlcXVpdmFsZW50IHRvIDUwJSByYWRpdXMKICAgICAgICAgICAgLy8gdGhpcy5yaXNrLmF0dHJpYnV0aW9uLnJlZ2lvbnMKICAgICAgICAgICAgbGV0IHJlbGF0aXZlX3NpemUgPSAgcl91bnNjYWxlZCAvIHRoaXMubWF4X3JhZGl1cyAKICAgICAgICAgICAgaWYoY2lyY2xlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMocmVsYXRpdmVfc2l6ZSAqIDMwKSArICIlIgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHJlbGF0aXZlX3NpemUgKiAyMCkgKyAicHgiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBnZXRBdHRyaWJ1dGlvbkdyYWQ6IGZ1bmN0aW9uKHJfdW5zY2FsZWQpIHsKICAgICAgICAgICAgaWYocl91bnNjYWxlZCA+PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3VybCgjZ3JhZFBvcyknCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3VybCgjZ3JhZE5lZyknCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGdldEF0dHJpYnV0aW9uQ29sb3I6IGZ1bmN0aW9uKHJfdW5zY2FsZWQpIHsKICAgICAgICAgICAgaWYocl91bnNjYWxlZCA+PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyM4NkFEM0InCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyNBRDNCM0InCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["CorrelationPlot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CorrelationPlot.vue","sourceRoot":"src/components","sourcesContent":["<!-- \nGood example here bar chart ---[ https://stackoverflow.com/questions/48726636/draw-d3-axis-without-direct-dom-manipulation \n-->\n\n<template>\n    <div v-if=\"!loading\" class='corr-flex-col'>\n        <div class='corr-header corr-flex-row'>\n            <div  v-for=\"c_cat in col_cats\" :key=\"'col_' + c_cat\" class='corr-header-container'>\n                <div class='corr-label'> \n                    {{getShortendedCategory(c_cat)}} <br><div style='opacity: 40%;'>[BENCH]</div>\n                </div>\n            </div>\n        </div>\n        <div class='corr-flex-row'>\n            <div class='corr-flex-col'>\n                <div v-for=\"r_cat in row_cats\" :key=\"'row_' + r_cat\" class='corr-label-container'>\n                    <div class='corr-label'>\n                        {{getShortendedCategory(r_cat)}} <br><div style='opacity: 40%;'>[PORT]</div>\n                    </div>\n                </div>\n            </div>\n            \n            <div  class='corr-flex-row' v-for=\"[cat_col, col_data] in Object.entries(data)\" :key=\"cat_col\">\n                <div class='corr-flex-col'>\n                    <div class='corr-stat-box' v-for=\"[cat_row, value] in Object.entries(col_data)\" :key=\"cat_row\">\n                        \n                        <svg width='100%' height='100%'>\n                            <defs>\n                                <linearGradient id=\"gradPos\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                                <stop offset=\"0%\" style=\"stop-color:#86AD3B;stop-opacity:1\" />\n                                <stop offset=\"100%\" style=\"stop-color:#A7D64B;stop-opacity:0.3\" />\n                                </linearGradient>\n                                <linearGradient id=\"gradNeg\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                                <stop offset=\"0%\" style=\"stop-color:#AD3B3B;stop-opacity:1\" />\n                                <stop offset=\"100%\" style=\"stop-color:#E55151;stop-opacity:0.3\" />\n                                </linearGradient>\n                            </defs>\n                            <circle :r=\"getPctAttributionRadius(value, true)\" :fill=\"getAttributionColor(value) + '40'\" cx='50%' cy='50%'></circle>\n                            <text x='50%' y='50%' :fill='getAttributionColor(value)' text-anchor='middle' :font-size='getPctAttributionRadius(value, false)' dominant-baseline='middle'>{{value}}</text>\n                        </svg>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport axios from 'axios';\nimport {round, sum} from 'mathjs';\n\nexport default {\n    name: \"vue-correlation-plot\",\n    props: ['data','short_category'],\n    data() {\n        return {\n            max_radius: 0,\n            col_cats: [],\n            row_cats: [],\n            loading: true,\n        };\n    }, \n    created() {\n        this.max_radius = 1\n        this.col_cats = Object.keys(this.data)\n        this.row_cats = Object.keys(this.data[this.col_cats[0]])\n        this.loading = false\n    },\n    methods: {\n        getShortendedCategory: function(cat) { \n            let split_cat = cat.split('_').slice(0,cat.split('_').length - 1).join('_')\n            \n            if(this.short_category) {\n                return this.short_category[split_cat]\n            } else {\n                return split_cat\n            }\n            \n        },\n        roundData(d, digits) {\n            return round(d, digits)\n        },\n        getPctAttributionRadius: function(r_unscaled, circle) {\n            // Gets the maximum value for the region\n            // This will be equivalent to 50% radius\n            // this.risk.attribution.regions\n            let relative_size =  r_unscaled / this.max_radius \n            if(circle) {\n                return Math.abs(relative_size * 30) + \"%\"\n            } else {\n                return Math.abs(relative_size * 20) + \"px\"\n            }\n            \n        },\n        getAttributionGrad: function(r_unscaled) {\n            if(r_unscaled >= 0) {\n                return 'url(#gradPos)'\n            } else {\n                return 'url(#gradNeg)'\n            }\n        },\n        getAttributionColor: function(r_unscaled) {\n            if(r_unscaled >= 0) {\n                return '#86AD3B'\n            } else {\n                return '#AD3B3B'\n            }\n        }\n    }\n};\n</script>\n<!-- css loaderhttps://vue-loader.vuejs.org/guide/scoped-css.html#mixing-local-and-global-styles -->\n<style>\n    .corr-stat-box {\n        width: 50px;\n        height: 50px;\n        font-family: 'Roboto', sans-serif;\n        color: white;\n        font-weight: 300;\n        border: 1px solid #ffffff20;\n        margin: 4px;\n        display: flex;\n        flex-direction: column;\n        align-content: center;\n        justify-content: center;\n    }\n\n    .corr-flex-col {\n        display:flex;\n        flex-direction: column;\n    }\n\n    .corr-flex-row {\n        display:flex;\n        flex-direction: row;\n    }\n\n    .row-labels {\n        height: 50px;\n    }\n\n    .corr-label {\n        font-family: 'Roboto', sans-serif;\n        color:#ffffff90;\n        font-size: 10px;\n    }\n\n    .corr-label-container {\n        height: 52px;\n        margin: 4px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .corr-header-container {\n        width: 52px;\n        margin: 4px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .corr-header {\n        margin-left: 63px;\n    }\n</style>\n"]}]}